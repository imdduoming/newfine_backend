<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/login.css" type="text/css">
    <title>Login</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="https://malsup.github.io/jquery.form.js"></script>
    <script type="text/javascript" src="js/back.js"></script>
    <script type="text/javascript">
        $(function () {
            $('.hide-show').show();
            $('.hide-show span').addClass('show')

            $('.hide-show span').click(function () {
                if ($(this).hasClass('show')) {
                    $(this).text('Hide');
                    $('input[name="login[password]"]').attr('type', 'text');
                    $(this).removeClass('show');
                } else {
                    $(this).text('Show');
                    $('input[name="login[password]"]').attr('type', 'password');
                    $(this).addClass('show');
                }
            });

            $('form button[type="submit"]').on('click', function () {
                $('.hide-show span').text('Show').addClass('show');
                $('.hide-show').parent().find('input[name="login[password]"]').attr('type', 'password');
            });
        });

        function login() {
            if ($('#phoneNumber').val() == '') {
                alert("핸드폰 번호를 입력해주세요!");
                login[phoneNumber].focus();
                return false;
            }
            if ($('#password').val() == '') {
                alert("비밀번호를 입력해주세요!");
                login[password].focus();
                return false;
            }
            var options = {
                success: function (result) {
                    $.cookie('accessToken', result['accessToken']);
                    $.cookie('refreshToken', result['refreshToken']);

                    alert('로그인되었습니다!');
                    window.location.href='/'
                },
                error: function (request, status, error) {
                    console.log("error");
                    alert("code : " + request.status + "\n" + "message : " + request.responseText + "\n" + "error : " + error);
                },
                type: "POST"
            };
            $("#login").ajaxSubmit(options);
        }
    </script>
</head>
<body>
<div class="login_form">
    <section class="login-wrapper">
        <div class="logo">
            관리자 로그인~~!
            <!--            <a target="_blank" rel="noopener" href="https://unrealnavigation.com">-->
            <!--                <img src="https://unrealnavigation.com/_themes/unrealnavigation/img/unreal-navigation-logo.png?v=1474018625" alt=""></a>-->
        </div>

        <form id="login" method="post" action="/auth/login">

            <label for="phoneNumber">핸드폰 번호</label>
            <input id="phoneNumber" required name="login[phoneNumber]" type="text" autocapitalize="off"
                   autocorrect="off"/>

            <label for="password">비밀번호</label>
            <input id="password" class="password" required name="login[password]" type="password"/>
            <div class="hide-show">
                <span>Show</span>
            </div>
            <button type="submit" onclick="login()">로그인</button>
        </form>

    </section>
</div>

</body>
</html>
